(this.webpackJsonpmarket=this.webpackJsonpmarket||[]).push([[0],{133:function(e,t,a){e.exports=a(149)},138:function(e,t,a){},139:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(49),i=a.n(c),o=(a(138),a(139),a(140),a(20)),l=a(14),s=a.n(l),u=a(21),p=a(162),m=a(160);function d(e){var t=e.points,a=Object(n.useState)([]),c=Object(o.a)(a,2),i=c[0],l=c[1];Object(n.useEffect)((function(){d()}),[t]);var d=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://coding-challenge-api.aerolab.co/user/history","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjU4MjNhZDc0MjM1MjAwMWVkOTA5YTQiLCJpYXQiOjE1OTk2MTE4MjF9.Dim4Cie-Odcpo-TO93tdmIuxec6tttl509zgwhMDOJQ",e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/history",{method:"GET",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjU4MjNhZDc0MjM1MjAwMWVkOTA5YTQiLCJpYXQiOjE1OTk2MTE4MjF9.Dim4Cie-Odcpo-TO93tdmIuxec6tttl509zgwhMDOJQ","Content-Type":"application/json",Accept:"application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,l(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(p.a,null,r.a.createElement(p.a.Content,null,r.a.createElement(p.a.Header,null,"History")),r.a.createElement(p.a.Content,null,r.a.createElement(m.a,null,i.map((function(e){return r.a.createElement(m.a.Event,{key:e._id},r.a.createElement(m.a.Label,{image:e.img.hdUrl}),r.a.createElement(m.a.Content,null,r.a.createElement(m.a.Date,{content:e.category}),r.a.createElement(m.a.Summary,null,e.name)))})))))}var O=a(159),h=a(158),j=[{key:1,text:"Phones",value:1},{key:2,text:"Gaming",value:2},{key:3,text:"Laptops",value:3},{key:4,text:"Cameras",value:4},{key:5,text:"Monitors & TV",value:5},{key:6,text:"Audio",value:6},{key:7,text:"Drones",value:7},{key:8,text:"PC Accessories",value:8},{key:9,text:"Smart Home",value:9},{key:10,text:"Tablets & E-readers",value:10}],f=[{key:1,text:"1.000 Pts",value:1e3},{key:2,text:"5.000 Pts",value:5e3},{key:3,text:"7.500 Pts",value:7500}],M=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pts,"https://coding-challenge-api.aerolab.co/user/points","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjU4MjNhZDc0MjM1MjAwMWVkOTA5YTQiLCJpYXQiOjE1OTk2MTE4MjF9.Dim4Cie-Odcpo-TO93tdmIuxec6tttl509zgwhMDOJQ",e.next=5,fetch("https://coding-challenge-api.aerolab.co/user/points",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjU4MjNhZDc0MjM1MjAwMWVkOTA5YTQiLCJpYXQiOjE1OTk2MTE4MjF9.Dim4Cie-Odcpo-TO93tdmIuxec6tttl509zgwhMDOJQ","Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({amount:a})});case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,console.log("data,",r["New Points"]),e.abrupt("return",r["New Points"]);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://coding-challenge-api.aerolab.co/user/me","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjU4MjNhZDc0MjM1MjAwMWVkOTA5YTQiLCJpYXQiOjE1OTk2MTE4MjF9.Dim4Cie-Odcpo-TO93tdmIuxec6tttl509zgwhMDOJQ",e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/me",{method:"GET",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjU4MjNhZDc0MjM1MjAwMWVkOTA5YTQiLCJpYXQiOjE1OTk2MTE4MjF9.Dim4Cie-Odcpo-TO93tdmIuxec6tttl509zgwhMDOJQ","Content-Type":"application/json",Accept:"application/json",CORS:"Access-Control-Allow-Origin"}});case 4:return t=e.sent,e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var I=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=(a[0],a[1],function(e){var t=Object(n.useState)({data:[],loading:!0}),a=Object(o.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){E().then((function(e){c({data:e,loading:!1})}))}),[e]),r}(e.points).data),i=c.name,l=c.points;e.setPoints(l);var p=function(){var t=Object(u.a)(s.a.mark((function t(a,n){var r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.value,t.next=3,M({pts:r});case 3:c=t.sent,e.setPoints(c);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(O.a,{inverted:!0,color:"black"},r.a.createElement(O.a.Item,null,i," -",e.points,r.a.createElement("img",{src:"",alt:"coins"})),r.a.createElement(O.a.Item,null,r.a.createElement(h.a,{clearable:!0,floating:!0,item:!0,selection:!0,placeholder:"Add Points",value:e.points,options:f,onChange:p})),r.a.createElement(O.a.Menu,{position:"right"},r.a.createElement(O.a.Item,{position:"right"},r.a.createElement(h.a,{clearable:!0,floating:!0,item:!0,selection:!0,placeholder:"Category",value:e.category,options:j,onChange:function(t,a){var n,r=a.value;e.setCategory(null===(n=j[r-1])||void 0===n?void 0:n.text),e.setSearch("")}}))))},g=a(122),y=a(163),C=function(e){var t=e.amount,a=e.frontMessage,n=e.backMessage;return r.a.createElement("div",null,r.a.createElement(y.a,{animated:"fade"},r.a.createElement(y.a.Content,{visible:!0},a,t),r.a.createElement(y.a.Content,{hidden:!0},n)))},v=a(161);function b(e,t){switch(t.type){case"OPEN_MODAL":return{open:!0,dimmer:t.dimmer};case"CLOSE_MODAL":return{open:!1};default:throw new Error}}var k=function(e){var t=e.frontMessageButtom,a=e.cost,n=e.backMessageButtom,c=e.title,i=e.content,l=e.buttomText,s=r.a.useReducer(b,{open:!1,dimmer:void 0}),u=Object(o.a)(s,2),p=u[0],m=u[1],d=p.open,O=p.dimmer;return r.a.createElement("div",null,r.a.createElement(y.a,{animated:"fade",onClick:function(){return m({type:"OPEN_MODAL",dimmer:"blurring"})}},r.a.createElement(y.a.Content,{visible:!0},t," ",a),r.a.createElement(y.a.Content,{hidden:!0},n)),r.a.createElement(v.a,{dimmer:O,open:d,onClose:function(){return m({type:"CLOSE_MODAL"})}},r.a.createElement(v.a.Header,null,c),r.a.createElement(v.a.Content,null,i),r.a.createElement(v.a.Actions,null,r.a.createElement(y.a,{positive:!0,onClick:function(){return m({type:"CLOSE_MODAL"})}},l),r.a.createElement(y.a,{negative:!0,onClick:function(){return m({type:"CLOSE_MODAL"})}},l))))},J=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.productId,"https://coding-challenge-api.aerolab.co/redeem","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjU4MjNhZDc0MjM1MjAwMWVkOTA5YTQiLCJpYXQiOjE1OTk2MTE4MjF9.Dim4Cie-Odcpo-TO93tdmIuxec6tttl509zgwhMDOJQ",e.next=5,fetch("https://coding-challenge-api.aerolab.co/redeem",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjU4MjNhZDc0MjM1MjAwMWVkOTA5YTQiLCJpYXQiOjE1OTk2MTE4MjF9.Dim4Cie-Odcpo-TO93tdmIuxec6tttl509zgwhMDOJQ","Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({productId:a})});case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,console.log("data,",r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=e.product,a=e.category,n=e.pointsLeft,c=e.cost,i=e.img,o=e.id;return r.a.createElement(p.a,{className:"shadow-drop-2-center card"},r.a.createElement(g.a,{src:i,wrapped:!0,ui:!1}),r.a.createElement(p.a.Content,null,r.a.createElement(p.a.Header,null,t),r.a.createElement(p.a.Meta,null,a),n>c?r.a.createElement(k,{frontMessageButtom:"Just",cost:c,backMessageButtom:"Redeem it!",title:"SUCESS!",content:"Your purchase was successfully approved ",buttomText:"Thanks",onActionClick:function(){J({productId:o}),console.log("redimiendo")}}):r.a.createElement(C,{amount:c-n,frontMessage:"Need",backMessage:"Bring them!"})),r.a.createElement(p.a.Content,{extra:!0}))},x=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://coding-challenge-api.aerolab.co/products","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjU4MjNhZDc0MjM1MjAwMWVkOTA5YTQiLCJpYXQiOjE1OTk2MTE4MjF9.Dim4Cie-Odcpo-TO93tdmIuxec6tttl509zgwhMDOJQ",e.next=4,fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjU4MjNhZDc0MjM1MjAwMWVkOTA5YTQiLCJpYXQiOjE1OTk2MTE4MjF9.Dim4Cie-Odcpo-TO93tdmIuxec6tttl509zgwhMDOJQ","Content-Type":"application/json",Accept:"application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a(148);var A=function(e){var t,a=e.category,c=e.search,i=e.points,l=function(e){var t=e.category,a=Object(n.useState)({data:[],loading:!0}),r=Object(o.a)(a,2),c=r[0],i=r[1];return Object(n.useEffect)((function(){x(t).then((function(e){i({data:e,loading:!1})}))}),[t]),c}(""),s=l.data,u=l.loading;return""===a?t=s:(t=s.filter((function(e){return e.category===a})),console.log(t)),c&&(t=t.filter((function(e){return e.name===c||e.cost===c}))),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,a||"Productos"),u&&"cargando.....",r.a.createElement("section",null,t.map((function(e){return r.a.createElement(T,{category:e.category,product:e.name,pointsLeft:i,cost:e.cost,img:e.img.url,id:e._id,key:e._id})}))))};var w=function(){var e=Object(n.useState)(0),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),l=Object(o.a)(i,2),s=l[0],u=l[1],p=Object(n.useState)(""),m=Object(o.a)(p,2),O=m[0],h=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",null,r.a.createElement(I,{category:s,points:a,search:O,setPoints:c,setCategory:u,setSearch:h}),r.a.createElement(A,{category:s,search:O,points:a})),r.a.createElement("aside",null,r.a.createElement(d,null)))};var Q=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(w,null))};i.a.render(r.a.createElement(Q,null),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.acd5aced.chunk.js.map